@model IEnumerable<dynamic>

@{
    ViewData["Title"] = "Lịch sử bài viết";
}

<h2 class="text-primary mb-4">Lịch sử bài viết</h2>

<!-- Thông báo lỗi -->
@if (!string.IsNullOrEmpty(ViewBag.ErrorMessage))

{
    <div class="alert alert-danger alert-dismissible fade show text-center" role="alert">
        @ViewBag.ErrorMessage
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Đóng"></button>
    </div>
}

<!-- Bảng lịch sử -->
<table class="table table-hover table-bordered shadow-sm">
    <thead class="table-dark text-center">
        <tr>
            <th>Tiêu đề</th>
            <th>Tiêu điểm</th>
            <th>Chuyên mục</th>
            <th>Ngày tạo</th>
            <th>Ngày sửa</th>
            <th>Người tạo</th>
            <th>Người sửa</th>
            <th>Trạng thái</th>
            <th>Thao tác</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var article in Model)

        {
            <tr>
                <td>@article.NewsTitle</td>
                <td>@article.Headline</td>
                <td>@article.CategoryName</td>
                <td>@article.CreatedDate?.ToString("dd/MM/yyyy")</td>
                <td>@article.ModifiedDate?.ToString("dd/MM/yyyy")</td>
                <td>@article.CreatedByName</td>
                <td>@article.UpdatedByName</td>
                <td class="text-center">
                    @if (article.NewsStatus == true)
                    {
                        <span class="badge bg-success">Đã duyệt</span>
                    }
                    else
                    {
                        <span class="badge bg-warning text-dark">Chờ duyệt</span>
                    }
                </td>
                <td class="text-center">
                    <a class="btn btn-info btn-sm" asp-controller="Staff" asp-action="ViewNewsArticle" asp-route-id="@article.NewsArticleId">
                        Xem
                    </a>
                </td>
            </tr>
        }
    </tbody>
</table>

@section Scripts {
    <script>
        setTimeout(function () {
            const alert = document.querySelector(".alert");
            if (alert) {
                alert.style.transition = "opacity 1s ease-out";
                alert.style.opacity = "0";
                setTimeout(() => alert.style.display = "none", 1000);
            }
        }, 5000);
    </script>
}
